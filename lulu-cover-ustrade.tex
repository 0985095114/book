% Cover for Lulu.com
\input{opt-ustrade}

\documentclass[\OPTfontsize]{article}

\usepackage[utf8]{inputenc}
\usepackage{rotating}
\usepackage{xcolor}
\definecolor{lightblue}{cmyk}{0.3125,0.03125,0.03125,0} % HEX CMYK 50 08 08 00
\pagecolor{lightblue}
%%% Set the fonts
\usepackage{mathpazo}
\usepackage[scaled=0.95]{helvet}
\usepackage{courier}
\linespread{1.05} % Palatino looks better with this

\usepackage{graphicx}

% Dimensions are reported by Lulu.com *after* you
% upload the inner PDF file.

\newlength{\totalwidth}
\setlength{\totalwidth}{977.84pt} % Reported as total cover width

\newlength{\coverheight}
\setlength{\coverheight}{666pt} % Reported as total cover height

\newlength{\spinewidth}
\setlength{\spinewidth}{95.84pt} % Reported as spine width

\newlength{\coverwidth}
\setlength{\coverwidth}{441pt} % Reported as "spine begins at"

% SANITY CHECK: \totalwidth = 2 * \coverwidth + \spinewidth

\usepackage[margin=0pt,
            papersize={\totalwidth,\coverheight},
            noheadfoot,
            textwidth=\totalwidth,
            textheight=\coverheight]{geometry}
%\usepackage{layout}
\newcommand{\coverpage}[1]{\hbox to \coverwidth{\vbox to \coverheight {#1}}}
\newcommand{\spine}[1]{\hbox to \spinewidth{\vbox to \coverheight{#1}}}

\parindent=0pt
\parskip=0pt

\newcommand{\frontpage}{
\begin{minipage}[b][\coverheight][c]{\coverwidth}
\centering
{\fontsize{\OPTcovertitlefont}{\OPTcovertitlefont}\fontseries{b}\selectfont%
Homotopy Type Theory}\par
\vspace*{\OPTcovertitleskip}
{\fontsize{\OPTcoversubtitlefont}{\OPTcoversubtitlefont}\fontseries{b}\fontshape{sc}\selectfont%
Univalent Foundations of Mathematics}
\includegraphics[width=0.99\coverwidth]{cover}
{\fontsize{\OPTcoverauthorfont}{\OPTcoverauthorfont}\fontshape{n}\selectfont%
The Univalent Foundations Program\par
\vspace*{\OPTcoverauthorskip}
Institute for Advanced Study\par}
\end{minipage}}

\newcommand{\spinetext}{
\begin{minipage}[b][\coverheight][t]{\spinewidth}
\begin{center}
  \begin{rotate}{270}
    \hspace{90pt}
    \begin{minipage}{\coverheight}
      {\fontsize{\OPTcovertitlefont}{\OPTcovertitlefont}\fontseries{b}\selectfont%
        Homotopy Type Theory}
    \end{minipage}
  \end{rotate}
\end{center}
\end{minipage}
}

\newcommand{\backpage}{
\begin{minipage}[b][\coverheight][c]{\coverwidth}
\begin{center}
\begin{minipage}[t]{0.7\coverwidth}
\input{blurb.tex}
\end{minipage}
\end{center}
\end{minipage}
}

\begin{document}
%\layout
\hbox{\coverpage{\backpage}\spine{\spinetext}\coverpage{\frontpage}}
\end{document}
